===========================================
RIGHT SIDEBAR - COMPLETE CODE (100% EXACT)
===========================================

CRITICAL INSTRUCTIONS FOR AI IMPLEMENTATION:
============================================

1. DO NOT modify, redesign, or "improve" any of this code
2. DO NOT add features that are not explicitly shown here
3. DO NOT change component names, file paths, or structure
4. IMPLEMENT EXACTLY as written - character by character
5. This is the COMPLETE right sidebar including:
   - CollapsibleAIChat component (shows when AI toggle is ON)
   - PostInsightsPanel component (shows when AI toggle is OFF)
   - All child components (ChatMessage, ChatTypingBar, TypingIndicator)
6. The toggle state (showAIChat) controls which component is visible

===========================================
PART 1: RIGHT SIDEBAR JSX (from CreatePostDesktop.tsx)
===========================================

Location: src/pages/CreatePostDesktop.tsx (lines 1025-1029)

```tsx
{/* Collapsible AI Chat Sidebar */}
<CollapsibleAIChat 
  onUseText={text => setPostContent(prev => prev ? prev + '\n' + text : text)} 
  hideToggleButton={true} 
  isExpanded={showAIChat} 
  onToggleChange={setShowAIChat} 
/>

{/* Post Insights Panel - Shows when AI is closed */}
<PostInsightsPanel isVisible={!showAIChat} />
```

STATE VARIABLES REQUIRED:
```tsx
const [showAIChat, setShowAIChat] = useState(false);
const [postContent, setPostContent] = useState('');
```

IMPORT STATEMENTS REQUIRED:
```tsx
import CollapsibleAIChat from '@/components/create-post/ai-chat/CollapsibleAIChat';
import PostInsightsPanel from '@/components/create-post/PostInsightsPanel';
```

===========================================
PART 2: CollapsibleAIChat.tsx - COMPLETE FILE
===========================================

File: src/components/create-post/ai-chat/CollapsibleAIChat.tsx

```tsx
import React, { useState, useRef, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { X, MessageSquare } from 'lucide-react';
import { Button } from '@/components/ui/button';
import ChatMessage from './ChatMessage';
import ChatTypingBar from './ChatTypingBar';
import TypingIndicator from './TypingIndicator';
import { useToast } from '@/hooks/use-toast';

interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
}

interface CollapsibleAIChatProps {
  onUseText?: (text: string) => void;
  hideToggleButton?: boolean;
  isExpanded?: boolean;
  onToggleChange?: (isExpanded: boolean) => void;
}

const CollapsibleAIChat: React.FC<CollapsibleAIChatProps> = ({ 
  onUseText, 
  hideToggleButton = false, 
  isExpanded: controlledIsExpanded,
  onToggleChange 
}) => {
  const [internalIsExpanded, setInternalIsExpanded] = useState(false);
  const isExpanded = controlledIsExpanded !== undefined ? controlledIsExpanded : internalIsExpanded;
  
  const [messages, setMessages] = useState<Message[]>([
    {
      id: '1',
      role: 'assistant',
      content: 'Hi! I\'m Shqipet AI, your creative assistant. I can help you improve your writing, generate captions, suggest hashtags, and more. How can I help you today?'
    }
  ]);
  const [isTyping, setIsTyping] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);
  const messagesContainerRef = useRef<HTMLDivElement>(null);
  const lastTouchYRef = useRef<number | null>(null);
  const { toast } = useToast();

  const handleWheelCapture = (e: React.WheelEvent<HTMLDivElement>) => {
    const el = messagesContainerRef.current;
    if (!el) return;
    e.stopPropagation();
    e.preventDefault();
    el.scrollTop += e.deltaY;
  };

  const handleTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {
    lastTouchYRef.current = e.touches[0].clientY;
  };

  const handleTouchMoveCapture = (e: React.TouchEvent<HTMLDivElement>) => {
    const el = messagesContainerRef.current;
    const lastY = lastTouchYRef.current;
    if (!el || lastY == null) return;
    const currentY = e.touches[0].clientY;
    const delta = lastY - currentY;
    e.stopPropagation();
    e.preventDefault();
    el.scrollTop += delta;
    lastTouchYRef.current = currentY;
  };

  const handleTouchEnd = () => { lastTouchYRef.current = null; };

  const toggleExpanded = (value: boolean) => {
    if (controlledIsExpanded === undefined) {
      setInternalIsExpanded(value);
    }
    onToggleChange?.(value);
  };

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages, isTyping]);

  // Lock background scroll when chat is open and prevent scroll chaining to the page
  useEffect(() => {
    const html = document.documentElement;
    const body = document.body;

    if (isExpanded) {
      const sbw = window.innerWidth - document.documentElement.clientWidth;

      const prevHtmlOverflow = html.style.overflow;
      const prevBodyOverflow = body.style.overflow;
      const prevHtmlOSB = html.style.overscrollBehavior as string;
      const prevBodyOSB = body.style.overscrollBehavior as string;
      const prevBodyPaddingRight = body.style.paddingRight;

      html.style.overscrollBehavior = 'none';
      body.style.overscrollBehavior = 'none';
      html.style.overflow = 'hidden';
      body.style.overflow = 'hidden';
      if (sbw > 0) body.style.paddingRight = `${sbw}px`;

      return () => {
        html.style.overscrollBehavior = prevHtmlOSB;
        body.style.overscrollBehavior = prevBodyOSB;
        html.style.overflow = prevHtmlOverflow;
        body.style.overflow = prevBodyOverflow;
        body.style.paddingRight = prevBodyPaddingRight;
      };
    } else {
      html.style.overscrollBehavior = '';
      body.style.overscrollBehavior = '';
      html.style.overflow = '';
      body.style.overflow = '';
      body.style.paddingRight = '';
    }
  }, [isExpanded]);
  const handleSendMessage = async (content: string) => {
    const userMessage: Message = {
      id: Date.now().toString(),
      role: 'user',
      content
    };

    setMessages(prev => [...prev, userMessage]);
    setIsTyping(true);

    // Simulate AI response
    setTimeout(() => {
      const aiMessage: Message = {
        id: (Date.now() + 1).toString(),
        role: 'assistant',
        content: getAIResponse(content)
      };
      setMessages(prev => [...prev, aiMessage]);
      setIsTyping(false);
    }, 1500);
  };

  const getAIResponse = (userMessage: string): string => {
    const lowerMessage = userMessage.toLowerCase();
    
    if (lowerMessage.includes('improve') || lowerMessage.includes('better')) {
      return 'Here\'s an improved version of your text:\n\n"Experience the extraordinary journey through life\'s most meaningful moments. Share your story with authenticity and passion."\n\nThis version is more engaging and emotionally resonant.';
    } else if (lowerMessage.includes('hashtag')) {
      return 'Here are some trending hashtags for your post:\n\n#Inspiration #LifeGoals #Motivation #Success #DailyVibes #AuthenticLiving #ShareYourStory';
    } else if (lowerMessage.includes('caption') || lowerMessage.includes('generate')) {
      return 'Here\'s a creative caption for you:\n\n"Every moment is a story waiting to be told. Today, I\'m sharing mine. ðŸŒŸ What\'s yours?"';
    } else {
      return 'I\'m here to help! You can ask me to:\n\nâ€¢ Improve your writing\nâ€¢ Generate captions\nâ€¢ Suggest hashtags\nâ€¢ Check grammar\nâ€¢ Translate text\nâ€¢ Optimize engagement\n\nWhat would you like me to help you with?';
    }
  };

  const handleUseText = (text: string) => {
    if (onUseText) {
      onUseText(text);
      toast({
        title: 'Text Applied',
        description: 'The text has been added to your post.',
      });
    }
  };

  return (
    <>
      <style>{`
        .no-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
        .no-scrollbar::-webkit-scrollbar { width: 0; height: 0; display: none; }
        .scroll-isolated { overscroll-behavior: contain; touch-action: pan-y; }
        .scroll-lock { overscroll-behavior: none; }
        .scroll-capture { touch-action: none; }
      `}</style>
      {/* Toggle Button (visible when collapsed) */}
      {!hideToggleButton && (
        <AnimatePresence>
          {!isExpanded && (
            <motion.div
              initial={{ opacity: 0, x: 50 }}
              animate={{ opacity: 1, x: 0 }}
              exit={{ opacity: 0, x: 50 }}
              className="fixed right-4 top-24 z-50"
            >
              <Button
                onClick={() => toggleExpanded(true)}
                className="bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg rounded-full px-4 py-2 flex items-center gap-2"
              >
                <MessageSquare className="w-5 h-5" />
                <span className="font-medium">ðŸ’¬ Shqipet AI</span>
              </Button>
            </motion.div>
          )}
        </AnimatePresence>
      )}

      {/* Chat Sidebar */}
      <AnimatePresence>
        {isExpanded && (
          <motion.div
            initial={{ opacity: 0, scale: 0.96, x: 40 }}
            animate={{ opacity: 1, scale: 1, x: 0 }}
            exit={{ opacity: 0, scale: 0.96, x: 40 }}
            transition={{ duration: 0.5, ease: [0.4, 0, 0.2, 1] }}
            className="fixed right-2 sm:right-4 top-[72px] h-[calc(100vh-88px)] w-full sm:w-[90vw] md:w-[400px] max-w-[400px] bg-white/70 backdrop-blur-xl shadow-lg border border-gray-200/60 z-50 flex flex-col rounded-3xl scroll-lock"
          >
            {/* Header */}
            <div className="flex items-center justify-between p-6 border-b border-gray-200/60">
              <div className="flex items-center gap-2">
                <svg height="20px" width="20px" viewBox="0 0 503.467 503.467" xmlns="http://www.w3.org/2000/svg">
                  <g transform="translate(1 1)">
                    <path fill="#ECF4F7" d="M429.933,259.267v102.4c0,18.773-15.36,34.133-34.133,34.133H105.667 c-18.773,0-34.133-15.36-34.133-34.133v-102.4v-85.333c0-18.773,15.36-34.133,34.133-34.133h68.267h8.533H319h76.8 c18.773,0,34.133,15.36,34.133,34.133V259.267z M327.533,139.8h-153.6c0-37.547,34.133-68.267,76.8-68.267 S327.533,102.253,327.533,139.8z M165.4,395.8h170.667l-25.6,102.4H191L165.4,395.8z"/>
                    <path fill="#FF7474" d="M250.733,3.267c9.387,0,17.067,7.68,17.067,17.067S260.12,37.4,250.733,37.4 c-9.387,0-17.067-7.68-17.067-17.067S241.347,3.267,250.733,3.267z M20.333,242.2c9.387,0,17.067,7.68,17.067,17.067 c0,9.387-7.68,17.067-17.067,17.067s-17.067-7.68-17.067-17.067C3.267,249.88,10.947,242.2,20.333,242.2z M481.133,242.2 c9.387,0,17.067,7.68,17.067,17.067c0,9.387-7.68,17.067-17.067,17.067s-17.067-7.68-17.067-17.067 C464.067,249.88,471.747,242.2,481.133,242.2z"/>
                    <polygon fill="#FFE079" points="173.933,344.6 327.533,344.6 327.533,310.467 173.933,310.467"/>
                    <path fill="#7EE1E6" d="M156.867,208.067c9.387,0,17.067,7.68,17.067,17.067s-7.68,17.067-17.067,17.067 s-17.067-7.68-17.067-17.067S147.48,208.067,156.867,208.067z M344.6,208.067c9.387,0,17.067,7.68,17.067,17.067 S353.987,242.2,344.6,242.2s-17.067-7.68-17.067-17.067S335.213,208.067,344.6,208.067z"/>
                  </g>
                  <path fill="#51565F" d="M311.467,503.467H192c-2.56,0-4.267-1.707-4.267-4.267c0-2.56,1.707-4.267,4.267-4.267h119.467 c2.56,0,4.267,1.707,4.267,4.267C315.733,501.76,314.027,503.467,311.467,503.467z M311.467,469.333H192 c-2.56,0-4.267-1.707-4.267-4.267c0-2.56,1.707-4.267,4.267-4.267h119.467c2.56,0,4.267,1.707,4.267,4.267 C315.733,467.627,314.027,469.333,311.467,469.333z M328.533,435.2h-153.6c-2.56,0-4.267-1.707-4.267-4.267 c0-2.56,1.707-4.267,4.267-4.267h153.6c2.56,0,4.267,1.707,4.267,4.267C332.8,433.493,331.093,435.2,328.533,435.2z M396.8,401.067 H106.667c-21.333,0-38.4-17.067-38.4-38.4V294.4c0-2.56,1.707-4.267,4.267-4.267c2.56,0,4.267,1.707,4.267,4.267v68.267 c0,16.213,13.653,29.867,29.867,29.867H396.8c16.213,0,29.867-13.653,29.867-29.867V294.4c0-2.56,1.707-4.267,4.267-4.267 s4.267,1.707,4.267,4.267v68.267C435.2,384,418.133,401.067,396.8,401.067z M328.533,349.867h-153.6 c-2.56,0-4.267-1.707-4.267-4.267v-34.133c0-2.56,1.707-4.267,4.267-4.267h153.6c2.56,0,4.267,1.707,4.267,4.267V345.6 C332.8,348.16,331.093,349.867,328.533,349.867z M281.6,341.333h42.667v-25.6H281.6V341.333z M230.4,341.333h42.667v-25.6H230.4 V341.333z M179.2,341.333h42.667v-25.6H179.2V341.333z M482.133,281.6c-10.24,0-18.773-7.68-21.333-17.067h-29.867 c-2.56,0-4.267-1.707-4.267-4.267v-85.333c0-16.213-13.653-29.867-29.867-29.867H209.067c-2.56,0-4.267-1.707-4.267-4.267 c0-2.56,1.707-4.267,4.267-4.267H396.8c21.333,0,38.4,17.067,38.4,38.4V256h25.6c1.707-9.387,10.24-17.067,21.333-17.067 c11.947,0,21.333,9.387,21.333,21.333C503.467,272.213,494.08,281.6,482.133,281.6z M482.133,247.467c-6.827,0-12.8,5.973-12.8,12.8 c0,6.827,5.973,12.8,12.8,12.8s12.8-5.973,12.8-12.8C494.933,253.44,488.96,247.467,482.133,247.467z M21.333,281.6 C9.387,281.6,0,272.213,0,260.267c0-11.947,9.387-21.333,21.333-21.333c10.24,0,18.773,7.68,20.48,17.067h26.453v-81.067 c0-21.333,17.067-38.4,38.4-38.4h64c2.56-37.547,40.96-65.707,76.8-68.267V41.813c-9.387-1.707-17.067-10.24-17.067-20.48 C230.4,9.387,239.787,0,251.733,0c11.947,0,21.333,9.387,21.333,21.333c0,10.24-7.68,18.773-17.067,20.48v26.453 c25.6,1.707,50.347,15.36,64.853,35.84c1.707,1.707,0.853,4.267-0.853,5.973c-1.707,1.707-4.267,0.853-5.973-0.853 C300.373,89.6,275.627,76.8,251.733,76.8c-34.133,0-72.533,27.307-72.533,64c0,2.56-1.707,4.267-4.267,4.267h-68.267 c-16.213,0-29.867,13.653-29.867,29.867v85.333c0,2.56-1.707,4.267-4.267,4.267h-30.72C40.107,273.92,31.573,281.6,21.333,281.6z M21.333,247.467c-6.827,0-12.8,5.973-12.8,12.8c0,6.827,5.973,12.8,12.8,12.8s12.8-5.973,12.8-12.8 C34.133,253.44,28.16,247.467,21.333,247.467z M251.733,8.533c-6.827,0-12.8,5.973-12.8,12.8s5.973,12.8,12.8,12.8 c6.827,0,12.8-5.973,12.8-12.8S258.56,8.533,251.733,8.533z M345.6,247.467c-11.947,0-21.333-9.387-21.333-21.333 S333.653,204.8,345.6,204.8c11.947,0,21.333,9.387,21.333,21.333S357.547,247.467,345.6,247.467z M345.6,213.333 c-6.827,0-12.8,5.973-12.8,12.8s5.973,12.8,12.8,12.8s12.8-5.973,12.8-12.8S352.427,213.333,345.6,213.333z M157.867,247.467 c-11.947,0-21.333-9.387-21.333-21.333s9.387-21.333,21.333-21.333c11.947,0,21.333,9.387,21.333,21.333 S169.813,247.467,157.867,247.467z M157.867,213.333c-6.827,0-12.8,5.973-12.8,12.8s5.973,12.8,12.8,12.8 c6.827,0,12.8-5.973,12.8-12.8S164.693,213.333,157.867,213.333z"/>
                </svg>
                <div>
                  <h3 className="font-bold text-gray-800">Shqipet AI</h3>
                  <p className="text-xs text-gray-600">Creative Assistant</p>
                </div>
              </div>
              <Button
                onClick={() => toggleExpanded(false)}
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0 text-gray-600 hover:text-[#e60000] hover:bg-gray-100 transition-colors"
              >
                <X className="w-4 h-4" />
              </Button>
            </div>

            {/* Messages Area */}
            <div
              ref={messagesContainerRef}
              className="flex-1 overflow-y-auto no-scrollbar scroll-isolated scroll-lock scroll-capture p-6 space-y-4"
              onWheelCapture={handleWheelCapture}
              onTouchStart={handleTouchStart}
              onTouchMoveCapture={handleTouchMoveCapture}
              onTouchEnd={handleTouchEnd}
            >
              {messages.map(message => (
                <ChatMessage
                  key={message.id}
                  role={message.role}
                  content={message.content}
                  onUseText={message.role === 'assistant' ? handleUseText : undefined}
                />
              ))}
              {isTyping && <TypingIndicator />}
              <div ref={messagesEndRef} />
            </div>

            {/* Typing Bar */}
            <div className="p-6 border-t border-gray-200/60">
              <ChatTypingBar onSendMessage={handleSendMessage} disabled={isTyping} />
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </>
  );
};

export default CollapsibleAIChat;
```

===========================================
PART 3: ChatMessage.tsx - COMPLETE FILE
===========================================

File: src/components/create-post/ai-chat/ChatMessage.tsx

```tsx
import React from 'react';
import { motion } from 'framer-motion';
import { Button } from '@/components/ui/button';
import { Sparkles } from 'lucide-react';

interface ChatMessageProps {
  role: 'user' | 'assistant';
  content: string;
  onUseText?: (text: string) => void;
}

const ChatMessage: React.FC<ChatMessageProps> = ({ role, content, onUseText }) => {
  const isUser = role === 'user';

  return (
    <motion.div
      initial={{ opacity: 0, y: 10 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.3 }}
      className={`flex ${isUser ? 'justify-end' : 'justify-start'} mb-4`}
    >
      <div className={`max-w-[80%] ${isUser ? 'order-2' : 'order-1'}`}>
        {!isUser && (
          <div className="flex items-center gap-2 mb-1">
            <Sparkles className="w-4 h-4 text-red-500" />
            <span className="text-xs font-medium text-gray-600">Shqipet AI</span>
          </div>
        )}
        
        <div
          className={`rounded-2xl px-4 py-3 ${
            isUser
              ? 'bg-gray-100 text-gray-800'
              : 'bg-gradient-to-br from-red-50 to-white border border-red-100'
          }`}
        >
          <p className="text-sm whitespace-pre-wrap break-words overflow-wrap-anywhere">{content}</p>
        </div>

        {!isUser && onUseText && (
          <Button
            onClick={() => onUseText(content)}
            variant="ghost"
            size="sm"
            className="mt-2 text-xs text-red-600 hover:text-red-700 hover:bg-red-50"
          >
            Use This Text
          </Button>
        )}
      </div>
    </motion.div>
  );
};

export default ChatMessage;
```

===========================================
PART 4: ChatTypingBar.tsx - COMPLETE FILE
===========================================

File: src/components/create-post/ai-chat/ChatTypingBar.tsx

```tsx
import React, { useState } from "react";
import { Button } from "@/components/ui/button";
import { Textarea } from "@/components/ui/textarea";
import { Send, Mic, AtSign, Zap, Link2 } from "lucide-react";

interface ChatTypingBarProps {
  onSendMessage: (message: string) => void;
  disabled?: boolean;
}

const ChatTypingBar: React.FC<ChatTypingBarProps> = ({ onSendMessage, disabled }) => {
  const [message, setMessage] = useState("");
  const [isFocused, setIsFocused] = useState(false);

  const textareaRef = React.useRef<HTMLTextAreaElement>(null);
  const lastTouchYRef = React.useRef<number | null>(null);

  const handleWheelCapture = (e: React.WheelEvent<HTMLTextAreaElement>) => {
    const el = textareaRef.current;
    if (!el) return;
    e.preventDefault();
    e.stopPropagation();
    el.scrollTop += e.deltaY;
  };

  const handleTouchStart = (e: React.TouchEvent<HTMLTextAreaElement>) => {
    lastTouchYRef.current = e.touches[0].clientY;
  };

  const handleTouchMoveCapture = (e: React.TouchEvent<HTMLTextAreaElement>) => {
    const el = textareaRef.current;
    const lastY = lastTouchYRef.current;
    if (!el || lastY == null) return;
    const currentY = e.touches[0].clientY;
    const delta = lastY - currentY;
    e.preventDefault();
    e.stopPropagation();
    el.scrollTop += delta;
    lastTouchYRef.current = currentY;
  };

  const handleTouchEnd = () => { lastTouchYRef.current = null; };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (message.trim() && !disabled) {
      onSendMessage(message);
      setMessage("");
    }
  };

  return (
    <form onSubmit={handleSubmit} className="relative">
      <style>{`
        .smoke-wrap {
          position: relative;
          border-radius: 1.25rem;
          overflow: visible;
          z-index: 1;
        }

        /* Neon glow around border */
        .smoke-wrap::before {
          content: "";
          position: absolute;
          inset: -4px;
          border-radius: 1.25rem;
          background: rgba(239, 68, 68, 0.3);
          filter: url(#smoke-turbulence) blur(12px);
          animation: smoke-color-shift 12s ease-in-out infinite alternate; animation-fill-mode: both;
          pointer-events: none;
          z-index: -1;
        }

        @keyframes smoke-color-shift {
          0% {
            background-color: rgba(239, 68, 68, 0.35);
          }
          100% {
            background-color: rgba(31, 41, 55, 0.1);
          }
        }

        /* Base typing box with very thin neon border */
        .smoke-inner {
          position: relative;
          border-radius: 1.25rem;
          background: white;
          border: 0.5px solid rgba(255, 255, 255, 0.3);
          z-index: 2;
        }

        /* Hide native scrollbars (internal scroll only, no indicator) */
        .no-scrollbar {
          scrollbar-width: none; /* Firefox */
          -ms-overflow-style: none; /* IE 10+ */
        }
        .no-scrollbar::-webkit-scrollbar {
          width: 0;
          height: 0;
          display: none; /* Safari and Chrome */
        }
        .scroll-isolated { overscroll-behavior: contain; touch-action: pan-y; }
        .scroll-lock { overscroll-behavior: none; }
        .scroll-capture { touch-action: none; }
      `}</style>
      {/* SVG filter for organic smoke turbulence */}
      <svg width="0" height="0" style={{ position: 'absolute' }} aria-hidden="true">
        <filter id="smoke-turbulence" x="-50%" y="-50%" width="200%" height="200%">
          <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="3" seed="2">
            <animate attributeName="baseFrequency" values="0.02;0.04;0.02" dur="10s" repeatCount="indefinite" />
          </feTurbulence>
          <feDisplacementMap in="SourceGraphic" scale="15">
            <animate attributeName="scale" values="10;20;10" dur="8s" repeatCount="indefinite" />
          </feDisplacementMap>
        </filter>
      </svg>

      <div className="smoke-wrap">
        <div className="smoke-inner px-4 py-3 space-y-2">
          {/* Textarea field */}
          <Textarea
            ref={textareaRef}
            value={message}
            onChange={(e) => setMessage(e.target.value)}
            placeholder="Ask anything..."
            disabled={disabled}
            onFocus={() => setIsFocused(true)}
            onBlur={() => setIsFocused(false)}
            onWheelCapture={handleWheelCapture}
            onTouchStart={handleTouchStart}
            onTouchMoveCapture={handleTouchMoveCapture}
            onTouchEnd={handleTouchEnd}
            onKeyDown={(e) => {
              if (e.key === "Enter" && !e.shiftKey) {
                e.preventDefault();
                handleSubmit(e);
              }
            }}
            style={{
              lineHeight: "1.5rem",
              fontSize: "1rem",
              caretColor: "hsl(var(--destructive))",
              height: (isFocused || message.trim().length > 0) ? "60px" : "20px",
            }}
            className={`w-full min-h-0 resize-none border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-[#888] text-[#111] px-0 py-0 leading-6 text-base no-scrollbar scroll-isolated scroll-lock scroll-capture ${isFocused || message.trim().length > 0 ? 'overflow-y-auto' : 'overflow-hidden'} transition-all duration-[3500ms] ease-in-out`}
          />

          {/* Icons row */}
          <div className="flex items-center justify-center gap-3 pt-1">
            {[AtSign, Zap, Link2, Mic].map((Icon, i) => (
              <Button
                key={i}
                type="button"
                variant="ghost"
                size="sm"
                className="h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:scale-110 transition-all ease-in-out duration-200"
              >
                <Icon className="w-4 h-4" />
              </Button>
            ))}
            <Button
              type="submit"
              disabled={!message.trim() || disabled}
              size="sm"
              className="h-9 w-9 p-0 bg-transparent hover:bg-transparent disabled:opacity-50 hover:scale-110 transition-all ease-in-out duration-200"
            >
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(-45)matrix(-1, 0, 0, 1, 0, 0)" className="w-6 h-6">
                <path d="M21.2897 17.0198L19.5497 13.5398C19.0697 12.5698 19.0697 11.4398 19.5497 10.4698L21.2897 6.98983C22.7797 3.99983 19.5697 0.859829 16.6197 2.41983L15.0797 3.23983C14.8697 3.34983 14.6997 3.52983 14.5997 3.74983L8.89969 16.3898C8.66969 16.9098 8.87969 17.5198 9.37969 17.7798L16.6197 21.5898C19.5697 23.1498 22.7797 19.9998 21.2897 17.0198Z" fill={message.trim() ? "#ef4444" : "#292D32"} />
                <path opacity="0.4" d="M7.68953 15.6L11.4195 7.31996C11.8395 6.38996 10.8395 5.44996 9.93953 5.92996L4.16953 8.95996C1.71953 10.25 1.71953 13.75 4.16953 15.04L6.20953 16.11C6.75953 16.4 7.42953 16.17 7.68953 15.6Z" fill={message.trim() ? "#ef4444" : "#292D32"} />
              </svg>
            </Button>
          </div>
        </div>
      </div>
    </form>
  );
};

export default ChatTypingBar;
```

===========================================
PART 5: TypingIndicator.tsx - COMPLETE FILE
===========================================

File: src/components/create-post/ai-chat/TypingIndicator.tsx

```tsx
import React from 'react';
import { motion } from 'framer-motion';
import { Sparkles } from 'lucide-react';

const TypingIndicator: React.FC = () => {
  return (
    <div className="flex justify-start mb-4">
      <div className="max-w-[80%]">
        <div className="flex items-center gap-2 mb-1">
          <Sparkles className="w-4 h-4 text-red-500" />
          <span className="text-xs font-medium text-gray-600">Shqipet AI</span>
        </div>
        
        <div className="rounded-2xl px-4 py-3 bg-gradient-to-br from-red-50 to-white border border-red-100">
          <div className="flex gap-1">
            {[0, 1, 2].map((i) => (
              <motion.div
                key={i}
                className="w-2 h-2 bg-red-400 rounded-full"
                animate={{
                  scale: [1, 1.2, 1],
                  opacity: [0.5, 1, 0.5],
                }}
                transition={{
                  duration: 1,
                  repeat: Infinity,
                  delay: i * 0.2,
                }}
              />
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

export default TypingIndicator;
```

===========================================
PART 6: PostInsightsPanel.tsx - COMPLETE FILE
===========================================

File: src/components/create-post/PostInsightsPanel.tsx

```tsx
import React from 'react';
import { motion } from 'framer-motion';
import { Clock, TrendingUp, BarChart3, Lightbulb, Hash, Users, Heart, MessageSquare } from 'lucide-react';
import { Card } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import FollowersIcon from '@/components/icons/FollowersIcon';

interface PostInsightsPanelProps {
  isVisible: boolean;
}

const PostInsightsPanel: React.FC<PostInsightsPanelProps> = ({ isVisible }) => {
  const trendingTags = [
    { tag: '#ShqipetCulture', count: '12.4K', trend: 'up' },
    { tag: '#TechNews', count: '8.2K', trend: 'up' },
    { tag: '#Photography', count: '6.7K', trend: 'up' },
    { tag: '#Travel', count: '5.3K', trend: 'down' },
    { tag: '#FoodLovers', count: '4.9K', trend: 'up' },
  ];

  const styleTips = [
    { icon: Heart, tip: 'Posts with emojis get 23% more reactions', color: 'text-red-500' },
    { icon: MessageSquare, tip: 'Questions increase comments by 35%', color: 'text-blue-500' },
    { icon: Users, tip: 'Tag 2-3 people for better engagement', color: 'text-purple-500' },
    { icon: Hash, tip: 'Use 3-5 hashtags for optimal reach', color: 'text-green-500' },
  ];

  if (!isVisible) return null;

  return (
    <motion.div
      initial={{ opacity: 0, x: 40 }}
      animate={{ opacity: 1, x: 0 }}
      exit={{ opacity: 0, x: 40 }}
      transition={{ duration: 0.3 }}
      className="hidden xl:block fixed right-2 lg:right-4 top-[72px] w-[340px] lg:w-[380px] h-[calc(100vh-88px)] overflow-y-auto space-y-4 pb-4"
    >
      {/* Best Time to Post */}
      <Card className="p-5 bg-card/80 backdrop-blur-xl border-border shadow-md">
        <div className="flex items-center gap-2 mb-4">
          <Clock className="w-5 h-5 text-blue-500" />
          <h3 className="font-semibold text-foreground">Best Time to Post</h3>
        </div>
        <div className="space-y-3">
          <div className="flex items-center justify-between">
            <span className="text-sm text-muted-foreground">Today's Peak Hours</span>
            <Badge variant="secondary" className="bg-green-500/20 text-green-600 dark:text-green-400">Active Now</Badge>
          </div>
          <div className="grid grid-cols-3 gap-2">
            <div className="p-2 bg-green-500/10 rounded-lg text-center border border-green-500/20">
              <p className="text-xs text-muted-foreground">Morning</p>
              <p className="font-bold text-green-600 dark:text-green-400">8-10 AM</p>
            </div>
            <div className="p-2 bg-blue-500/10 rounded-lg text-center border border-blue-500/20">
              <p className="text-xs text-muted-foreground">Lunch</p>
              <p className="font-bold text-blue-600 dark:text-blue-400">12-2 PM</p>
            </div>
            <div className="p-2 bg-purple-500/10 rounded-lg text-center border border-purple-500/20">
              <p className="text-xs text-muted-foreground">Evening</p>
              <p className="font-bold text-purple-600 dark:text-purple-400">7-9 PM</p>
            </div>
          </div>
          <div className="flex items-center gap-2 text-xs text-muted-foreground">
            <FollowersIcon className="w-3 h-3" />
            <span>1,234 of your followers are online now</span>
          </div>
        </div>
      </Card>

      {/* Trending Tags */}
      <Card className="p-5 bg-card/80 backdrop-blur-xl border-border shadow-md">
        <div className="flex items-center gap-2 mb-4">
          <TrendingUp className="w-5 h-5 text-orange-500" />
          <h3 className="font-semibold text-foreground">Trending Tags</h3>
        </div>
        <div className="space-y-2">
          {trendingTags.map((item, idx) => (
            <button
              key={idx}
              className="w-full flex items-center justify-between p-2 hover:bg-accent rounded-lg transition-colors group"
            >
              <div className="flex items-center gap-2">
                <Hash className="w-4 h-4 text-muted-foreground group-hover:text-blue-500 transition-colors" />
                <span className="font-medium text-sm text-foreground group-hover:text-blue-600 dark:group-hover:text-blue-400">
                  {item.tag.slice(1)}
                </span>
              </div>
              <div className="flex items-center gap-2">
                <span className="text-xs text-muted-foreground">{item.count}</span>
                <TrendingUp className={`w-3 h-3 ${item.trend === 'up' ? 'text-green-500' : 'text-red-500'}`} />
              </div>
            </button>
          ))}
        </div>
      </Card>

      {/* Post Health Meter */}
      <Card className="p-5 bg-card/80 backdrop-blur-xl border-border shadow-md">
        <div className="flex items-center gap-2 mb-4">
          <BarChart3 className="w-5 h-5 text-purple-500" />
          <h3 className="font-semibold text-foreground">Post Health Meter</h3>
        </div>
        <div className="space-y-3">
          <div>
            <div className="flex items-center justify-between mb-1">
              <span className="text-sm text-muted-foreground">Content Quality</span>
              <span className="text-xs font-medium text-muted-foreground">60%</span>
            </div>
            <div className="h-2 bg-muted rounded-full overflow-hidden">
              <div className="h-full bg-gradient-to-r from-yellow-400 to-orange-500 w-[60%] transition-all duration-500" />
            </div>
          </div>
          <div>
            <div className="flex items-center justify-between mb-1">
              <span className="text-sm text-muted-foreground">Media Included</span>
              <span className="text-xs font-medium text-red-500">0%</span>
            </div>
            <div className="h-2 bg-muted rounded-full overflow-hidden">
              <div className="h-full bg-red-400 w-0 transition-all duration-500" />
            </div>
          </div>
          <div>
            <div className="flex items-center justify-between mb-1">
              <span className="text-sm text-muted-foreground">Hashtags</span>
              <span className="text-xs font-medium text-red-500">0%</span>
            </div>
            <div className="h-2 bg-muted rounded-full overflow-hidden">
              <div className="h-full bg-red-400 w-0 transition-all duration-500" />
            </div>
          </div>
          <div className="mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg">
            <p className="text-xs text-muted-foreground">
              ðŸ’¡ Add images and hashtags to boost your post's reach by up to 40%!
            </p>
          </div>
        </div>
      </Card>

      {/* Style Tips */}
      <Card className="p-5 bg-card/80 backdrop-blur-xl border-border shadow-md">
        <div className="flex items-center gap-2 mb-4">
          <Lightbulb className="w-5 h-5 text-yellow-500" />
          <h3 className="font-semibold text-foreground">Style Tips</h3>
        </div>
        <div className="space-y-3">
          {styleTips.map((item, idx) => (
            <div key={idx} className="flex items-start gap-3 p-2 hover:bg-accent rounded-lg transition-colors">
              <item.icon className={`w-5 h-5 ${item.color} flex-shrink-0 mt-0.5`} />
              <p className="text-sm text-foreground">{item.tip}</p>
            </div>
          ))}
        </div>
      </Card>

      {/* Quick Stats */}
      <Card className="p-5 bg-gradient-to-br from-red-500/10 to-purple-500/10 border-border shadow-md">
        <h4 className="font-semibold text-foreground mb-3">Your Recent Performance</h4>
        <div className="grid grid-cols-3 gap-3">
          <div className="text-center">
            <p className="text-2xl font-bold text-red-600 dark:text-red-400">156</p>
            <p className="text-xs text-muted-foreground">Avg. Likes</p>
          </div>
          <div className="text-center">
            <p className="text-2xl font-bold text-blue-600 dark:text-blue-400">42</p>
            <p className="text-xs text-muted-foreground">Avg. Comments</p>
          </div>
          <div className="text-center">
            <p className="text-2xl font-bold text-purple-600 dark:text-purple-400">89</p>
            <p className="text-xs text-muted-foreground">Avg. Shares</p>
          </div>
        </div>
      </Card>
    </motion.div>
  );
};

export default PostInsightsPanel;
```

===========================================
COMPLETE IMPLEMENTATION PROMPT FOR OTHER AI
===========================================

**CRITICAL PROMPT FOR IMPLEMENTATION:**

You are receiving the COMPLETE and EXACT code for the right sidebar of a Create Post page. This sidebar has TWO states:

1. **When AI Chat is ENABLED** (showAIChat = true):
   - Shows CollapsibleAIChat component
   - Fixed position right sidebar with AI chat interface
   - Header with "Shqipet AI" branding and close button
   - Scrollable messages area with chat history
   - ChatMessage components for user/assistant messages
   - "Use This Text" button on assistant messages to insert text into post
   - ChatTypingBar at bottom with animated smoke/neon border effect
   - TypingIndicator shows when AI is "thinking"

2. **When AI Chat is DISABLED** (showAIChat = false):
   - Shows PostInsightsPanel component
   - Fixed position right sidebar with post insights
   - Best Time to Post card with peak hours
   - Trending Tags card with clickable hashtags
   - Post Health Meter showing content quality metrics
   - Style Tips card with engagement tips
   - Quick Stats card showing recent performance

**IMPLEMENTATION REQUIREMENTS:**

1. Create ALL component files EXACTLY as shown:
   - src/components/create-post/ai-chat/CollapsibleAIChat.tsx
   - src/components/create-post/ai-chat/ChatMessage.tsx
   - src/components/create-post/ai-chat/ChatTypingBar.tsx
   - src/components/create-post/ai-chat/TypingIndicator.tsx
   - src/components/create-post/PostInsightsPanel.tsx

2. In your main create post page component:
   - Add state: `const [showAIChat, setShowAIChat] = useState(false);`
   - Add the JSX from PART 1 (CollapsibleAIChat and PostInsightsPanel)
   - Ensure toggle mechanism works (only ONE visible at a time)

3. DO NOT:
   - Modify any styling, animations, or effects
   - Change component names or file paths
   - Add features not explicitly shown
   - Simplify or "improve" the code
   - Change the AI response logic

4. PRESERVE:
   - Exact scroll isolation and touch handling logic
   - Smoke/neon animation effects on ChatTypingBar
   - Framer Motion animations throughout
   - Fixed positioning and responsive widths
   - All icons, colors, and visual design

5. The toggle state should be controlled by a button in your main UI (not shown here) that calls `setShowAIChat(!showAIChat)`

IMPLEMENT EVERY SINGLE LINE EXACTLY AS WRITTEN. THIS IS NOT A REFERENCE - THIS IS THE PRODUCTION CODE.
