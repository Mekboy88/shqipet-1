/* Universal Photo Grid - Perfect Mathematical Layout System */
/* Implements exact rotations as specified by user requirements */

.universal-photo-grid {
  display: grid;
  width: 100%;
  gap: 4px;
  border-radius: 8px;
  overflow: hidden;
}

.universal-photo-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  cursor: pointer;
}

.universal-photo-wrapper img,
.universal-photo-wrapper video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* 1 PHOTO: Single display */
.universal-grid-1 {
  grid-template-columns: 1fr;
  grid-template-rows: 1fr;
  aspect-ratio: 1/1;
}

/* 2 PHOTOS */
/* 1V+1H: V left 40% / H right 60% */
.universal-grid-2-1v1h {
  grid-template-columns: 2fr 3fr;
  grid-template-rows: 1fr;
  aspect-ratio: 5/3;
}

/* 2V: 50/50 columns */
.universal-grid-2-2v {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr;
  aspect-ratio: 2/1;
}

/* 2H: 50/50 rows */
.universal-grid-2-2h {
  grid-template-columns: 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 1/2;
}

/* 3 PHOTOS */
/* 2V+1H: V,V top 50/50; H bottom 100% */
.universal-grid-3-2v1h {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 1/1;
}

.universal-grid-3-2v1h .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1; }
.universal-grid-3-2v1h .universal-photo-wrapper:nth-child(2) { grid-column: 2; grid-row: 1; }
.universal-grid-3-2v1h .universal-photo-wrapper:nth-child(3) { grid-column: 1 / -1; grid-row: 2; }

/* 2H+1V: V left 40%; right has two H stacked 60% */
.universal-grid-3-2h1v {
  grid-template-columns: 2fr 3fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 5/2;
}

.universal-grid-3-2h1v .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1 / -1; }
.universal-grid-3-2h1v .universal-photo-wrapper:nth-child(2) { grid-column: 2; grid-row: 1; }
.universal-grid-3-2h1v .universal-photo-wrapper:nth-child(3) { grid-column: 2; grid-row: 2; }

/* 3V: row of three equal columns */
.universal-grid-3-3v {
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: 1fr;
  aspect-ratio: 3/1;
}

/* 3H: top H,H 50/50; bottom H 100% */
.universal-grid-3-3h {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 1/1;
}

.universal-grid-3-3h .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1; }
.universal-grid-3-3h .universal-photo-wrapper:nth-child(2) { grid-column: 2; grid-row: 1; }
.universal-grid-3-3h .universal-photo-wrapper:nth-child(3) { grid-column: 1 / -1; grid-row: 2; }

/* 4 PHOTOS: Clean 2×2 grid */
.universal-grid-4-2x2 {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 1/1;
}

/* 5 PHOTOS */
/* 3V+2H: left 40% with 3 V; right 60% with 2 H */
.universal-grid-5-3v2h {
  grid-template-columns: 2fr 3fr;
  grid-template-rows: 1fr 1fr 1fr;
  aspect-ratio: 5/3;
}

.universal-grid-5-3v2h .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1; }
.universal-grid-5-3v2h .universal-photo-wrapper:nth-child(2) { grid-column: 1; grid-row: 2; }
.universal-grid-5-3v2h .universal-photo-wrapper:nth-child(3) { grid-column: 1; grid-row: 3; }
.universal-grid-5-3v2h .universal-photo-wrapper:nth-child(4) { grid-column: 2; grid-row: 1 / 3; }
.universal-grid-5-3v2h .universal-photo-wrapper:nth-child(5) { grid-column: 2; grid-row: 3; }

/* 2V+3H: left 40% with 2 V; right 60% with 3 H */
.universal-grid-5-2v3h {
  grid-template-columns: 2fr 3fr;
  grid-template-rows: 1fr 1fr 1fr;
  aspect-ratio: 5/3;
}

.universal-grid-5-2v3h .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1 / 3; }
.universal-grid-5-2v3h .universal-photo-wrapper:nth-child(2) { grid-column: 1; grid-row: 3; }
.universal-grid-5-2v3h .universal-photo-wrapper:nth-child(3) { grid-column: 2; grid-row: 1; }
.universal-grid-5-2v3h .universal-photo-wrapper:nth-child(4) { grid-column: 2; grid-row: 2; }
.universal-grid-5-2v3h .universal-photo-wrapper:nth-child(5) { grid-column: 2; grid-row: 3; }

/* 4V+1H: top four V in a row; bottom H 100% */
.universal-grid-5-4v1h {
  grid-template-columns: 1fr 1fr 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 2/1;
}

.universal-grid-5-4v1h .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1; }
.universal-grid-5-4v1h .universal-photo-wrapper:nth-child(2) { grid-column: 2; grid-row: 1; }
.universal-grid-5-4v1h .universal-photo-wrapper:nth-child(3) { grid-column: 3; grid-row: 1; }
.universal-grid-5-4v1h .universal-photo-wrapper:nth-child(4) { grid-column: 4; grid-row: 1; }
.universal-grid-5-4v1h .universal-photo-wrapper:nth-child(5) { grid-column: 1 / -1; grid-row: 2; }

/* 4H+1V: V left 40%; right side 2×2 H */
.universal-grid-5-4h1v {
  grid-template-columns: 2fr 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 2/1;
}

.universal-grid-5-4h1v .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1 / -1; }
.universal-grid-5-4h1v .universal-photo-wrapper:nth-child(2) { grid-column: 2; grid-row: 1; }
.universal-grid-5-4h1v .universal-photo-wrapper:nth-child(3) { grid-column: 3; grid-row: 1; }
.universal-grid-5-4h1v .universal-photo-wrapper:nth-child(4) { grid-column: 2; grid-row: 2; }
.universal-grid-5-4h1v .universal-photo-wrapper:nth-child(5) { grid-column: 3; grid-row: 2; }

/* 5V: left has 2 V; right has 3 V (no gaps, balanced spans) */
.universal-grid-5-5v {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr 1fr;
  aspect-ratio: 2/3;
}

.universal-grid-5-5v .universal-photo-wrapper:nth-child(1) { grid-column: 1; grid-row: 1 / 3; }
.universal-grid-5-5v .universal-photo-wrapper:nth-child(2) { grid-column: 1; grid-row: 3; }
.universal-grid-5-5v .universal-photo-wrapper:nth-child(3) { grid-column: 2; grid-row: 1; }
.universal-grid-5-5v .universal-photo-wrapper:nth-child(4) { grid-column: 2; grid-row: 2; }
.universal-grid-5-5v .universal-photo-wrapper:nth-child(5) { grid-column: 2; grid-row: 3; }

/* 5H: top has 2 H (50/50); bottom has 3 H (equal thirds) */
.universal-grid-5-5h {
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 3/2;
}

.universal-grid-5-5h .universal-photo-wrapper:nth-child(1) { grid-column: 1 / 3; grid-row: 1; }
.universal-grid-5-5h .universal-photo-wrapper:nth-child(2) { grid-column: 3; grid-row: 1; }
.universal-grid-5-5h .universal-photo-wrapper:nth-child(3) { grid-column: 1; grid-row: 2; }
.universal-grid-5-5h .universal-photo-wrapper:nth-child(4) { grid-column: 2; grid-row: 2; }
.universal-grid-5-5h .universal-photo-wrapper:nth-child(5) { grid-column: 3; grid-row: 2; }

/* 5+ items: same as 5 layout with overlay */
.universal-grid-5plus {
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  aspect-ratio: 3/2;
}

.universal-grid-5plus .universal-photo-wrapper:nth-child(1) { grid-column: 1 / 3; grid-row: 1; }
.universal-grid-5plus .universal-photo-wrapper:nth-child(2) { grid-column: 3; grid-row: 1; }
.universal-grid-5plus .universal-photo-wrapper:nth-child(3) { grid-column: 1; grid-row: 2; }
.universal-grid-5plus .universal-photo-wrapper:nth-child(4) { grid-column: 2; grid-row: 2; }
.universal-grid-5plus .universal-photo-wrapper:nth-child(5) { grid-column: 3; grid-row: 2; }

/* Responsive adjustments */
@media (max-width: 640px) {
  .universal-photo-grid {
    gap: 2px;
  }
  
  /* Mobile: Stack vertically for complex layouts */
  .universal-grid-3-2h1v,
  .universal-grid-5-3v2h,
  .universal-grid-5-2v3h,
  .universal-grid-5-4v1h,
  .universal-grid-5-4h1v {
    grid-template-columns: 1fr;
    grid-template-rows: repeat(auto-fit, minmax(120px, 1fr));
    aspect-ratio: 1/2;
  }
  
  .universal-grid-3-2h1v .universal-photo-wrapper,
  .universal-grid-5-3v2h .universal-photo-wrapper,
  .universal-grid-5-2v3h .universal-photo-wrapper,
  .universal-grid-5-4v1h .universal-photo-wrapper,
  .universal-grid-5-4h1v .universal-photo-wrapper {
    grid-column: 1;
    grid-row: auto;
  }
}